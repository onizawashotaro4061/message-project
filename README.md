# 寄せ書きアプリ

明治大学向けの寄せ書きメッセージアプリケーション

## 初期設定情報

### 仮パスワード
- **役員**: `meiji2024`
- **副局長・部門長**: `Meidaisai141`
- **場所**: `app/api/create-users/route.ts`
- **用途**: 管理者が作成したアカウントの初期パスワード

### 管理者パスワード
- **管理者パスワード**: `admin123`
- **用途**: ユーザー一括作成API (`/api/create-users`) の認証

### 運用フロー
1. 管理者が `/api/create-users` でアカウントを一括作成
2. ユーザーにメールアドレスと仮パスワード `Meidaisai141` を配布
3. ユーザーはログイン後、`/change-password` で必ずパスワード変更
4. 以降は変更後のパスワードでログイン

## 機能一覧

### ユーザー機能
- ✅ サインアップ（アイコン設定可能）
- ✅ ログイン
- ✅ メッセージ送信（カードデザイン選択可能）
- ✅ メッセージ受信・閲覧
- ✅ 送信済みメッセージ一覧・編集・削除
- ✅ プロフィール設定（アイコン変更、表示名変更）
- ✅ パスワード変更

### アイコン機能
- サインアップ時にアイコン設定
- 自動画像圧縮（200KB以下、512×512px）
- プロフィールページでアイコン変更・削除可能

## Supabase設定

### 必要なバケット
- `avatars`: ユーザーアイコン画像用（Public）

### テーブル構成
- `messages`: メッセージデータ
  - `id`, `sender_id`, `recipient_id`, `sender_name`, `message`, `card_style`, `image_url`, `created_at`

### RLSポリシー
- ユーザーは自分宛のメッセージと自分が送信したメッセージを閲覧可能
- ユーザーは自分が送信したメッセージのみ編集・削除可能

## 容量計算

### アイコン画像
- 450人 × 200KB = 約90MB
- Supabase無料プラン（1GB）で十分対応可能

### メッセージ
- テキストのみ（画像添付機能は削除済み）
- 容量への影響は最小限
